---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Colophon - Learn Ultrasound Focusing" description="Technical details, tools, and frameworks used in building the Learn Ultrasound Focusing project">
  <div class="colophon-container">
    <div class="page-header">
      <h1>🛠 Colophon</h1>
      <p>Technical details about the tools, frameworks, and technologies used to build this educational platform.</p>
    </div>

    <section class="colophon-section">
      <h2>Web Framework & Build Tools</h2>
      <div class="tech-grid">
        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🚀</div>
            <h3>Astro</h3>
            <span class="tech-version">v5.12.8</span>
          </div>
          <p>Modern static site generator that enables component-based development with optimal performance. Chosen for its excellent TypeScript support and ability to ship minimal JavaScript to the browser.</p>
          <div class="tech-links">
            <a href="https://astro.build" target="_blank" rel="noopener noreferrer">astro.build</a>
          </div>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">📝</div>
            <h3>TypeScript</h3>
            <span class="tech-version">v5.8.3</span>
          </div>
          <p>Provides type safety for the complex mathematical calculations involved in ultrasound simulation, making the codebase more maintainable and less prone to errors.</p>
          <div class="tech-links">
            <a href="https://www.typescriptlang.org" target="_blank" rel="noopener noreferrer">typescriptlang.org</a>
          </div>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">⚡</div>
            <h3>Vite</h3>
            <span class="tech-version">v7.0.4</span>
          </div>
          <p>Fast build tool and development server that enables hot module replacement during development and optimized bundling for production.</p>
          <div class="tech-links">
            <a href="https://vitejs.dev" target="_blank" rel="noopener noreferrer">vitejs.dev</a>
          </div>
        </div>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Visualization & Simulation</h2>
      <div class="tech-grid">
        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🎨</div>
            <h3>HTML5 Canvas</h3>
          </div>
          <p>Native browser API for 2D graphics rendering. Provides real-time visualization of ultrasound wave propagation and array element behavior with high performance.</p>
          <div class="tech-links">
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" target="_blank" rel="noopener noreferrer">MDN Canvas API</a>
          </div>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">📊</div>
            <h3>Custom Simulation Engine</h3>
          </div>
          <p>Purpose-built TypeScript classes for ultrasound array elements, wave propagation calculations, and beamforming algorithms. Implements real-time parameter adjustment and frame generation.</p>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🎬</div>
            <h3>WebM/MP4 Recording</h3>
          </div>
          <p>Browser-native MediaRecorder API for capturing canvas animations as video files. Supports both WebM (Chrome/Firefox) and MP4 (Safari) formats for broad compatibility.</p>
          <div class="tech-links">
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder" target="_blank" rel="noopener noreferrer">MDN MediaRecorder</a>
          </div>
        </div>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Testing & Quality Assurance</h2>
      <div class="tech-grid">
        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🧪</div>
            <h3>Jest</h3>
            <span class="tech-version">v30.0.5</span>
          </div>
          <p>JavaScript testing framework used for unit testing mathematical calculations, array element behavior, and wave propagation simulations to ensure accuracy.</p>
          <div class="tech-links">
            <a href="https://jestjs.io" target="_blank" rel="noopener noreferrer">jestjs.io</a>
          </div>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🎭</div>
            <h3>Canvas Mock</h3>
            <span class="tech-version">v2.5.2</span>
          </div>
          <p>Mock implementation of HTML5 Canvas API for testing visualization components in Node.js environment without requiring a browser.</p>
          <div class="tech-links">
            <a href="https://github.com/hustcc/jest-canvas-mock" target="_blank" rel="noopener noreferrer">jest-canvas-mock</a>
          </div>
        </div>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Development Tools</h2>
      <div class="tech-grid">
        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">📦</div>
            <h3>npm</h3>
          </div>
          <p>Package manager for JavaScript dependencies. Manages the project's build tools, testing frameworks, and development dependencies.</p>
          <div class="tech-links">
            <a href="https://www.npmjs.com" target="_blank" rel="noopener noreferrer">npmjs.com</a>
          </div>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🔧</div>
            <h3>ESLint & Prettier</h3>
          </div>
          <p>Code linting and formatting tools to maintain consistent code style and catch potential issues during development.</p>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🌐</div>
            <h3>Modern Web Standards</h3>
          </div>
          <p>Built using ES2022+ features, CSS Grid/Flexbox, and progressive enhancement principles for optimal performance across modern browsers.</p>
        </div>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Mathematical Libraries</h2>
      <div class="content-card">
        <h3>Custom Mathematical Implementation</h3>
        <p>
          Rather than relying on external mathematical libraries, this project implements ultrasound-specific calculations directly in TypeScript. This approach provides:
        </p>
        <ul>
          <li><strong>Transparency:</strong> All calculations are visible and can be studied as part of the educational content</li>
          <li><strong>Customization:</strong> Algorithms can be modified to demonstrate different aspects of ultrasound physics</li>
          <li><strong>Performance:</strong> Optimized specifically for real-time visualization requirements</li>
          <li><strong>Educational Value:</strong> Students can examine the actual implementation of theoretical concepts</li>
        </ul>
        <p>
          Key mathematical components include:
        </p>
        <ul>
          <li>Wave propagation calculations using time-domain simulations</li>
          <li>Array element delay calculations for point and linear focusing</li>
          <li>Interference pattern computation for wave superposition</li>
          <li>Canvas-based rendering algorithms for real-time visualization</li>
        </ul>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Accessibility & Performance</h2>
      <div class="content-card">
        <h3>Design Principles</h3>
        <ul>
          <li><strong>Responsive Design:</strong> Adapts to different screen sizes using CSS Grid and Flexbox</li>
          <li><strong>Progressive Enhancement:</strong> Core functionality works without JavaScript, enhanced with interactive features</li>
          <li><strong>Semantic HTML:</strong> Proper heading structure and landmark elements for screen readers</li>
          <li><strong>Performance Optimization:</strong> Minimal JavaScript bundle, efficient canvas rendering, lazy loading</li>
          <li><strong>Cross-browser Compatibility:</strong> Tested on Chrome, Firefox, Safari, and Edge</li>
        </ul>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Deployment & Hosting</h2>
      <div class="tech-grid">
        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">📡</div>
            <h3>Static Site Generation</h3>
          </div>
          <p>Built as a static site for optimal performance and easy deployment to any static hosting service. No server-side processing required.</p>
        </div>

        <div class="tech-card">
          <div class="tech-header">
            <div class="tech-logo">🚀</div>
            <h3>GitHub Pages Ready</h3>
          </div>
          <p>Configured for easy deployment to GitHub Pages, Netlify, Vercel, or any static hosting provider with simple CI/CD integration.</p>
        </div>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Project Structure</h2>
      <div class="content-card">
        <div class="file-tree">
          <div class="file-tree-item">📁 <strong>src/</strong></div>
          <div class="file-tree-item indent-1">📁 <strong>layouts/</strong> - Astro layout components</div>
          <div class="file-tree-item indent-1">📁 <strong>pages/</strong> - Site pages and routes</div>
          <div class="file-tree-item indent-1">📁 <strong>shared/</strong> - Constants and shared utilities</div>
          <div class="file-tree-item indent-1">📄 <strong>main.ts</strong> - Core ultrasound simulation engine</div>
          <div class="file-tree-item indent-1">📄 <strong>arrayElement.ts</strong> - Array element class implementation</div>
          <div class="file-tree-item indent-1">📄 <strong>client.ts</strong> - Browser initialization code</div>
          <div class="file-tree-item">📁 <strong>public/</strong> - Static assets</div>
          <div class="file-tree-item">📄 <strong>astro.config.mjs</strong> - Astro configuration</div>
          <div class="file-tree-item">📄 <strong>tsconfig.json</strong> - TypeScript configuration</div>
          <div class="file-tree-item">📄 <strong>package.json</strong> - Project dependencies and scripts</div>
        </div>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Version Information</h2>
      <div class="version-info">
        <div class="version-card">
          <h4>Project Version</h4>
          <p>0.0.0 (Development)</p>
        </div>
        <div class="version-card">
          <h4>Last Updated</h4>
          <p>August 2024</p>
        </div>
        <div class="version-card">
          <h4>License</h4>
          <p>Open Source (See GitHub repository)</p>
        </div>
      </div>
    </section>

    <section class="colophon-section">
      <h2>Browser Support</h2>
      <div class="browser-support">
        <div class="browser-item">
          <span class="browser-name">Chrome</span>
          <span class="browser-version">90+</span>
          <span class="support-status full">Full Support</span>
        </div>
        <div class="browser-item">
          <span class="browser-name">Firefox</span>
          <span class="browser-version">88+</span>
          <span class="support-status full">Full Support</span>
        </div>
        <div class="browser-item">
          <span class="browser-name">Safari</span>
          <span class="browser-version">14+</span>
          <span class="support-status partial">Partial Support*</span>
        </div>
        <div class="browser-item">
          <span class="browser-name">Edge</span>
          <span class="browser-version">90+</span>
          <span class="support-status full">Full Support</span>
        </div>
      </div>
      <p class="browser-note">
        * Safari has limited MediaRecorder support for video export. Frame sequence download is provided as fallback.
      </p>
    </section>
  </div>
</Layout>

<style>
  .colophon-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .page-header {
    text-align: center;
    margin-bottom: 3rem;
    padding: 2rem;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border-radius: 12px;
  }

  .page-header h1 {
    font-size: 2.5rem;
    margin: 0 0 1rem 0;
    color: #1e293b;
  }

  .page-header p {
    font-size: 1.125rem;
    color: #64748b;
    margin: 0;
    line-height: 1.7;
  }

  .colophon-section {
    margin-bottom: 3rem;
  }

  .colophon-section h2 {
    font-size: 2rem;
    color: #1e293b;
    margin-bottom: 2rem;
    padding-bottom: 0.5rem;
    border-bottom: 3px solid #06b6d4;
  }

  .tech-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1rem;
  }

  .tech-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    border: 1px solid #e2e8f0;
    transition: transform 0.3s ease;
  }

  .tech-card:hover {
    transform: translateY(-2px);
  }

  .tech-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .tech-logo {
    font-size: 2rem;
  }

  .tech-header h3 {
    color: #1e293b;
    margin: 0;
    font-size: 1.25rem;
    flex: 1;
  }

  .tech-version {
    background: #f1f5f9;
    color: #64748b;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .tech-card p {
    color: #64748b;
    line-height: 1.7;
    margin-bottom: 1rem;
  }

  .tech-links {
    display: flex;
    gap: 1rem;
  }

  .tech-links a {
    color: #06b6d4;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.875rem;
    transition: color 0.3s ease;
  }

  .tech-links a:hover {
    color: #0891b2;
  }

  .content-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    border: 1px solid #e2e8f0;
  }

  .content-card h3 {
    color: #1e293b;
    margin: 0 0 1rem 0;
    font-size: 1.5rem;
  }

  .content-card p {
    color: #64748b;
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .content-card ul {
    color: #64748b;
    line-height: 1.7;
    padding-left: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .content-card li {
    margin-bottom: 0.5rem;
  }

  .file-tree {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.875rem;
    background: #f8fafc;
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
  }

  .file-tree-item {
    color: #374151;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
  }

  .indent-1 {
    padding-left: 1.5rem;
  }

  .version-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .version-card {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    border: 1px solid #e2e8f0;
    text-align: center;
  }

  .version-card h4 {
    color: #1e293b;
    margin: 0 0 0.5rem 0;
    font-size: 1rem;
  }

  .version-card p {
    color: #64748b;
    margin: 0;
    font-weight: 600;
  }

  .browser-support {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    border: 1px solid #e2e8f0;
  }

  .browser-item {
    display: grid;
    grid-template-columns: 1fr auto auto;
    gap: 1rem;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid #f1f5f9;
  }

  .browser-item:last-child {
    border-bottom: none;
  }

  .browser-name {
    font-weight: 600;
    color: #1e293b;
  }

  .browser-version {
    color: #64748b;
    font-size: 0.875rem;
  }

  .support-status {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .support-status.full {
    background: #dcfce7;
    color: #166534;
  }

  .support-status.partial {
    background: #fef3c7;
    color: #92400e;
  }

  .browser-note {
    color: #64748b;
    font-size: 0.875rem;
    margin-top: 1rem;
    font-style: italic;
  }

  @media (max-width: 768px) {
    .colophon-container {
      padding: 0 1rem;
    }

    .page-header {
      padding: 1.5rem;
    }

    .page-header h1 {
      font-size: 2rem;
    }

    .page-header p {
      font-size: 1rem;
    }

    .colophon-section h2 {
      font-size: 1.75rem;
    }

    .tech-grid {
      grid-template-columns: 1fr;
    }

    .tech-card,
    .content-card {
      padding: 1.5rem;
    }

    .tech-header {
      flex-wrap: wrap;
    }

    .version-info {
      grid-template-columns: 1fr;
    }

    .browser-item {
      grid-template-columns: 1fr;
      gap: 0.5rem;
      text-align: center;
    }
  }
</style>
